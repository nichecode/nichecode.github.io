<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Architecting for Testability in Go (Part 1): Foundations and Principles &#183; Nicholas Hammond</title>
<meta name=title content="Architecting for Testability in Go (Part 1): Foundations and Principles &#183; Nicholas Hammond"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.8f25b3b1fdd42cfaf2092d7e98b41f6474cfaf471f6aeb265f7ba2579197e54e.css integrity="sha256-jyWzsf3ULPryCS1+mLQfZHTPr0cfausmX3uiV5GX5U4="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.90a48a144b2de1542549eda42e3a5a686046f98731a313b07209f4432d7f0946.js integrity="sha256-kKSKFEst4VQlSe2kLjpaaGBG+YcxoxOwcgn0Qy1/CUY=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      Understanding the architectural foundations that enable better testing in Go applications
    "><meta name=robots content="index, follow"><link rel=canonical href=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-1/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://nichecode.github.io/posts/architecting-for-testability-in-go/part-1/"><meta property="og:site_name" content="Nicholas Hammond"><meta property="og:title" content="Architecting for Testability in Go (Part 1): Foundations and Principles"><meta property="og:description" content="Understanding the architectural foundations that enable better testing in Go applications"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-10T01:00:00+00:00"><meta property="article:modified_time" content="2025-04-10T01:00:00+00:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="Testing"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Clean-Code"><meta name=twitter:card content="summary"><meta name=twitter:title content="Architecting for Testability in Go (Part 1): Foundations and Principles"><meta name=twitter:description content="Understanding the architectural foundations that enable better testing in Go applications"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Architecting for Testability in Go (Part 1): Foundations and Principles","headline":"Architecting for Testability in Go (Part 1): Foundations and Principles","description":"Understanding the architectural foundations that enable better testing in Go applications","abstract":"\u003cdiv class=\u0022flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900\u0022\u003e\n  \u003cspan class=\u0022pe-3 text-primary-400\u0022\u003e\n    \u003cspan class=\u0022icon relative inline-block px-1 align-text-bottom\u0022\u003e\u003csvg xmlns=\u0022http:\/\/www.w3.org\/2000\/svg\u0022 viewBox=\u00220 0 512 512\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z\u0022\/\u003e\u003c\/svg\u003e\n\u003c\/span\u003e\n  \u003c\/span\u003e\n  \u003cspan class=\u0022dark:text-neutral-300\u0022\u003eThis is Part 1 of a 3-part series on architecting Go applications for testability. This part covers the foundational principles and architectural approach.\u003c\/span\u003e\n\u003c\/div\u003e\n\n\u003ch2 id=\u0022introduction\u0022 class=\u0022relative group\u0022\u003eIntroduction \u003cspan class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100\u0022\u003e\u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700\u0022 style=\u0022text-decoration-line: none !important;\u0022 href=\u0022#introduction\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\u003c\/span\u003e\u003c\/h2\u003e\u003cp\u003eHow easily can you understand a piece of code seconds after looking at it? How quickly can you write a meaningful test for it?\u003c\/p\u003e","inLanguage":"en","url":"https:\/\/nichecode.github.io\/posts\/architecting-for-testability-in-go\/part-1\/","author":{"@type":"Person","name":"Nicholas Hammond"},"copyrightYear":"2025","dateCreated":"2025-04-10T01:00:00\u002b00:00","datePublished":"2025-04-10T01:00:00\u002b00:00","dateModified":"2025-04-10T01:00:00\u002b00:00","keywords":["go","testing","architecture","clean-code"],"mainEntityOfPage":"true","wordCount":"1745"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://nichecode.github.io/","name":"Nicholas Hammond","position":1},{"@type":"ListItem","item":"https://nichecode.github.io/posts/","name":"Posts","position":2},{"@type":"ListItem","item":"https://nichecode.github.io/posts/architecting-for-testability-in-go/","name":"Architecting for Testability in Go Using Fakes, Not Mocks","position":3},{"@type":"ListItem","item":"https://nichecode.github.io/categories/software-development/","name":"Software Development","position":4},{"@type":"ListItem","name":"Architecting for Testability in Go ( Part 1) Foundations and Principles","position":5}]}</script><meta name=author content="Nicholas Hammond"><link href=https://github.com/nichecode rel=me><script defer type=text/javascript src=/js/mermaid.bundle.832624a553672a6ccda17159509c1ec6d0d691d57d975bab3ea0c67d4b5f45e838af68b83e8b06f78aa79c286b60388f54be6e274806fdbdc642a0019161d9e2.js integrity="sha512-gyYkpVNnKmzNoXFZUJwextDWkdV9l1urPqDGfUtfReg4r2i4PosG94qnnChrYDiPVL5uJ0gG/b3GQqABkWHZ4g=="></script></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Nicholas Hammond</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="invisible fixed inset-0 z-30 m-auto h-full w-full cursor-default overflow-auto bg-neutral-100/50 opacity-0 backdrop-blur-sm transition-opacity dark:bg-neutral-900/50"><ul class="mx-auto flex w-full max-w-7xl list-none flex-col overflow-visible px-6 py-6 text-end sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="group mb-1"><a href=/posts/ title=Posts onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="group mb-1"><a href=/tags/ title=Tags onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1"><a href=/categories/ title=Categories onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="group mb-1"><a href=/about/ title=About onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1"><button id=search-button-1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></div></label><ul class="hidden list-none flex-row text-end sm:flex"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/about/ title=About><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-2 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/>Nicholas Hammond</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/architecting-for-testability-in-go/>Architecting for Testability in Go: Using Fakes, Not Mocks</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/architecting-for-testability-in-go/part-1/>Architecting for Testability in Go (Part 1): Foundations and Principles</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Architecting for Testability in Go (Part 1): Foundations and Principles</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2025-04-10 01:00:00 +0000 UTC">10 April 2025</time><span class="px-2 text-primary-500">&#183;</span><span>1745 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">9 mins</span></div><div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/categories/software-development/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Software Development</a>
<a href=/tags/go/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Go</a>
<a href=/tags/testing/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Testing</a>
<a href=/tags/architecture/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Architecture</a>
<a href=/tags/clean-code/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Clean-Code</a></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#relationship-to-established-architectural-patterns>Relationship to Established Architectural Patterns</a><ul><li><a href=#how-this-approach-differs-from-traditional-onion-architecture>How This Approach Differs From Traditional Onion Architecture</a></li><li><a href=#simplicity-as-a-goal>Simplicity as a Goal</a></li></ul></li><li><a href=#the-problem-with-traditional-testing-approaches>The Problem with Traditional Testing Approaches</a><ul><li><a href=#mocks-implementation-coupling>Mocks: Implementation Coupling</a></li><li><a href=#integration-tests-trade-offs>Integration Tests: Trade-offs</a></li></ul></li><li><a href=#the-clean-architecture-structure-functional-core-imperative-shell>The Clean Architecture Structure: Functional Core, Imperative Shell</a></li><li><a href=#why-architect-this-way>Why Architect This Way?</a></li><li><a href=#what-are-fake-implementations>What Are Fake Implementations?</a></li><li><a href=#coming-up-in-part-2>Coming Up in Part 2</a></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>
</span></span><span class=dark:text-neutral-300>This is Part 1 of a 3-part series on architecting Go applications for testability. This part covers the foundational principles and architectural approach.</span></div><h2 id=introduction class="relative group">Introduction <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#introduction aria-label=Anchor>#</a></span></h2><p>How easily can you understand a piece of code seconds after looking at it? How quickly can you write a meaningful test for it?</p><p>For many engineering teams, the answer is often &ldquo;not easily enough.&rdquo; Complex structures lead to high cognitive load, difficult reasoning, and consequently, tests that are brittle, slow, or hard to write – making refactoring daunting and slowing down development.</p><p>When tests are painful to write or maintain, it&rsquo;s usually a symptom of underlying architectural issues. Well-structured applications with clear separation of concerns naturally lend themselves to straightforward, &ldquo;boring&rdquo; tests – and boring tests are good tests.</p><h2 id=relationship-to-established-architectural-patterns class="relative group">Relationship to Established Architectural Patterns <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#relationship-to-established-architectural-patterns aria-label=Anchor>#</a></span></h2><p>The approach described in this series builds upon established architectural patterns, but creates a pragmatic hybrid that addresses specific testing challenges:</p><ul><li><p><strong>Functional Core, Imperative Shell (FCIS)</strong>: This pattern, popularized by Gary Bernhardt, emphasizes pure functions for business logic and relegates side effects to the outer &ldquo;shell.&rdquo;<figure><img src=images/functional-core-imperative-shell.svg alt="Functional Core Imperative Shell" loading=lazy></figure></p><ul><li><strong>How we apply it</strong>: We strictly enforce a pure functional domain with immutable types and no side effects. However, in pure FCIS, the imperative shell can be difficult to test since it contains all side effects. Our approach makes the shell testable by dividing it into an application layer (with abstractions for external dependencies) and infrastructure layer (with implementations), enabling easier testing through fakes.</li></ul></li><li><p><strong>Hexagonal/Onion Architecture</strong>: Both patterns focus on dependency inversion where domain logic is independent of external concerns, with dependencies pointing inward through abstractions.<figure><img src=images/hexagonal-architecture.svg alt="Hexagonal/Onion Architecture" loading=lazy></figure></p><ul><li><strong>How we apply it</strong>: From experience, implementations of these patterns often become over-engineered with excessive abstraction layers. Our approach applies the core principles (separation of concerns, dependency inversion) while deliberately minimizing the number of layers and abstractions to what&rsquo;s essential for testability.</li></ul></li><li><p><strong>Domain-Driven Design (DDD)</strong>: While not requiring full DDD adoption, our approach embraces the separation of domain logic and the use of a ubiquitous language within bounded contexts.</p><ul><li><strong>How we apply it</strong>: We focus on the tactical patterns that improve testability, particularly pure functions and immutable value objects and entities in our domain layer.</li></ul></li></ul><p>The architecture described here isn&rsquo;t claiming to be novel—rather, it&rsquo;s a practical synthesis of these proven patterns, creating a testing-friendly approach that maintains the benefits of each while avoiding common pitfalls like over-abstraction and excessive complexity.</p><h3 id=how-this-approach-differs-from-traditional-onion-architecture class="relative group">How This Approach Differs From Traditional Onion Architecture <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-this-approach-differs-from-traditional-onion-architecture aria-label=Anchor>#</a></span></h3><p>While the architecture we&rsquo;ll describe in this article shares principles with Hexagonal/Onion architecture, there are important differences you&rsquo;ll see as we explore it in detail:</p><ol><li><p><strong>Deliberate Minimalism</strong>: Unlike many onion architecture implementations that introduce numerous layers and abstractions, our approach deliberately uses only three primary layers with minimal interfaces.</p></li><li><p><strong>Functional Core Integration</strong>: We combine the dependency inversion of onion architecture with the pure functional approach of Functional Core, Imperative Shell - creating a stronger emphasis on immutability and side-effect isolation than typical onion architectures.</p></li><li><p><strong>Go-Idiomatic Implementation</strong>: Rather than forcing object-oriented patterns into Go, we leverage Go&rsquo;s structural typing and composition to achieve clean architecture principles without the ceremony.</p></li><li><p><strong>Practical Over Pure</strong>: We prioritize practical testability and development speed over architectural purity, avoiding the &ldquo;explosion of interfaces&rdquo; that often plagues onion architecture implementations.</p></li><li><p><strong>Testing Strategy Integration</strong>: Our fake-based testing approach is integral to the architecture, not just a testing technique applied afterward.</p></li></ol><p>This approach isn&rsquo;t claiming to reinvent architecture - it&rsquo;s a deliberate simplification and adaptation of established patterns with a focus on what actually matters: testable, maintainable code that&rsquo;s quick to develop.</p><p>As we explore this architecture in more depth in the following sections, these differences will become more apparent.</p><h3 id=simplicity-as-a-goal class="relative group">Simplicity as a Goal <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#simplicity-as-a-goal aria-label=Anchor>#</a></span></h3><p>A common criticism of patterns like Hexagonal/Onion Architecture—especially in the .NET ecosystem—is that they introduce unnecessary complexity and over-engineering. Many developers have experienced codebases where these patterns were applied dogmatically, resulting in:</p><ol><li><strong>Explosion of Interfaces</strong>: One interface per class, often with only a single implementation</li><li><strong>Deep Inheritance Hierarchies</strong>: Abstractions built on abstractions</li><li><strong>Bloated Projects</strong>: Simple features requiring changes across numerous files and projects</li><li><strong>Development Friction</strong>: Taking disproportionate time to implement straightforward functionality</li><li><strong>Testing Complexity</strong>: Tests that focus more on verifying implementation details than behavior</li></ol><p>This series aims to counter these experiences by presenting:</p><ol><li><p><strong>A Minimalist Implementation</strong>: We focus on the essential structural elements that deliver the most value, avoiding ceremonial abstractions.</p></li><li><p><strong>Pragmatic Boundaries</strong>: Clear but not overly rigid separation of concerns, with just enough structure to enable testability and maintainability.</p></li><li><p><strong>Go-Idiomatic Approach</strong>: Leveraging Go&rsquo;s simplicity and structural typing rather than forcing patterns from other languages.</p></li><li><p><strong>Embracing Go&rsquo;s Philosophy</strong>: Go was designed to be simple and approachable. The language itself discourages over-engineering through its lack of inheritance, straightforward type system, and emphasis on clarity over cleverness. Our approach aligns with this philosophy by favoring direct, readable code over complex abstractions.</p></li></ol><p>The goal is to achieve a &ldquo;Goldilocks architecture&rdquo; – not too complex, not too simplistic – that provides the benefits of clean separation without drowning in abstraction. The ultimate measure of success is whether the architecture makes your codebase easier to understand, test, and change over time.</p><h2 id=the-problem-with-traditional-testing-approaches class="relative group">The Problem with Traditional Testing Approaches <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-problem-with-traditional-testing-approaches aria-label=Anchor>#</a></span></h2><p>Before diving into solutions, let&rsquo;s understand some challenges that can arise with common testing approaches:</p><h3 id=mocks-implementation-coupling class="relative group">Mocks: Implementation Coupling <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#mocks-implementation-coupling aria-label=Anchor>#</a></span></h3><p>Testing with mocking frameworks often focuses on verifying interactions (&ldquo;was method X called with argument Y?&rdquo;). This approach can have several drawbacks:</p><ul><li><strong>Potential Test Brittleness</strong>: Tests may break during refactoring, even when behavior is unchanged, if they&rsquo;re tied to implementation details.</li><li><strong>Implementation Coupling</strong>: Tests might resist changes to internal implementation details, potentially hindering refactoring.</li><li><strong>Setup Complexity</strong>: Mock setup and expectation management can become verbose and might obscure the test&rsquo;s intent.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Example of a mock-based test</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestServiceWithMocks</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mockRepo</span> <span class=o>:=</span> <span class=nb>new</span><span class=p>(</span><span class=nx>MockRepository</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>mockRepo</span><span class=p>.</span><span class=nf>On</span><span class=p>(</span><span class=s>&#34;Get&#34;</span><span class=p>,</span> <span class=s>&#34;user1&#34;</span><span class=p>).</span><span class=nf>Return</span><span class=p>(</span><span class=nx>user</span><span class=p>,</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>mockRepo</span><span class=p>.</span><span class=nf>On</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>,</span> <span class=nx>mock</span><span class=p>.</span><span class=nf>MatchedBy</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>u</span><span class=p>.</span><span class=nx>ID</span> <span class=o>==</span> <span class=s>&#34;user1&#34;</span> <span class=o>&amp;&amp;</span> <span class=nx>u</span><span class=p>.</span><span class=nx>IsActive</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>})).</span><span class=nf>Return</span><span class=p>(</span><span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>service</span> <span class=o>:=</span> <span class=nf>NewUserService</span><span class=p>(</span><span class=nx>mockRepo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>service</span><span class=p>.</span><span class=nf>ActivateUser</span><span class=p>(</span><span class=s>&#34;user1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>require</span><span class=p>.</span><span class=nf>NoError</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>mockRepo</span><span class=p>.</span><span class=nf>AssertExpectations</span><span class=p>(</span><span class=nx>t</span><span class=p>)</span>  <span class=c1>// This verifies the implementation details</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=integration-tests-trade-offs class="relative group">Integration Tests: Trade-offs <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#integration-tests-trade-offs aria-label=Anchor>#</a></span></h3><p>Relying primarily on integration tests with real dependencies brings different considerations:</p><ul><li><strong>Execution Time</strong>: Tests involving databases, file systems, or network calls typically take longer to run.</li><li><strong>Resource Requirements</strong>: May require additional infrastructure setup for CI/CD environments.</li><li><strong>Environmental Factors</strong>: Tests might be affected by external conditions.</li></ul><h2 id=the-clean-architecture-structure-functional-core-imperative-shell class="relative group">The Clean Architecture Structure: Functional Core, Imperative Shell <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-clean-architecture-structure-functional-core-imperative-shell aria-label=Anchor>#</a></span></h2><p>A clean, layered architecture separates your application into distinct areas of responsibility, closely following the &ldquo;Functional Core, Imperative Shell&rdquo; pattern:</p><pre tabindex=0><code>internal/
├── domain/       # Pure business logic and types (Functional Core)
├── application/  # Orchestration &amp; interface definitions (Imperative Shell)
│   ├── contracts/    # DTOs defining application boundaries
│   │   ├── api/      # e.g., ActivateUserRequest, UserResponse 
│   │   └── messaging/ # e.g., UserActivatedEvent
│   ├── interfaces.go # Interfaces defining infrastructure dependencies
│   └── service.go    # Orchestrates domain logic using interfaces,
│                     # translates between contracts and domain models
└── infrastructure/ # Implementations &amp; entry points (Imperative Shell)
    ├── bootstrap/    # Wires dependencies together
    ├── http/         # HTTP handlers (use application/contracts/api)
    ├── messaging/    # Message handlers (use application/contracts/messaging)
    └── storage/      # Real &amp; fake repository implementations
</code></pre><p>With this structure:</p><figure><img src=images/clean-architecture-layers.svg alt="Clean Architecture Layers visualization" loading=lazy></figure><div class=mermaid align=center>graph TD
subgraph "Imperative Shell"
subgraph Infrastructure["Infrastructure Layer"]
style Infrastructure fill:#4f91fc,stroke:#2c2c2c,color:white
HTTP["HTTP Handlers"]
Messaging["Message Handlers"]
Storage["Storage Implementations"]
Bootstrap["Bootstrap/Wiring"]
end
subgraph Application["Application Layer"]
style Application fill:#43dd93,stroke:#2c2c2c,color:white
Services["Services"]
Interfaces["Interfaces"]
Contracts["Contracts/DTOs"]
end
end
subgraph "Functional Core"
subgraph Domain["Domain Layer"]
style Domain fill:#b7b7b7,stroke:#2c2c2c,color:white
DomainModels["Domain Models & Pure Logic"]
        end
    end
%% Infrastructure depends on Application
HTTP ---> Services
HTTP ---> Contracts
Messaging ---> Services
Messaging ---> Contracts
Storage ---> Interfaces
Bootstrap ---> Services
Bootstrap ---> Interfaces
%% Application depends on Domain
Services ---> DomainModels
Contracts -..-> DomainModels
%% Set link style
linkStyle default stroke:#ffffff,stroke-width:2px</div><ol><li><p><strong>Domain Layer (Functional Core)</strong>:</p><ul><li>Contains pure business logic with no dependencies</li><li>Uses immutable data types and value objects</li><li>Consists of pure functions with no side effects</li><li>All operations are deterministic and return new values rather than modifying state</li><li>Easy to test in complete isolation</li><li><strong>Important</strong>: Domain models are only used by domain and application layers - they never leak to external interfaces (APIs, messaging) or cross service boundaries</li></ul></li><li><p><strong>Application Layer (Begins the Imperative Shell)</strong>:</p><ul><li>Orchestrates use cases by combining domain logic with external effects</li><li>Defines interfaces for what it needs from the outside world</li><li>Manages workflow and translates between domain and external concerns</li><li><strong>Owns all contract definitions</strong> (API DTOs, message schemas) through which the outside world interacts with the system</li><li>Performs mapping between domain models and external contracts to prevent domain leakage</li></ul></li><li><p><strong>Infrastructure Layer (Completes the Imperative Shell)</strong>:</p><ul><li>Handles all side effects (database, network, etc.)</li><li>Provides entry points into the application via APIs, message consumers, CLI commands, etc.</li><li>Implements interfaces defined by the application layer</li><li>Contains adapters for external systems and frameworks</li><li>Translates between external formats (HTTP, message queues) and application contracts</li><li><strong>Never directly exposes domain models</strong> to the outside world</li></ul></li></ol><h2 id=why-architect-this-way class="relative group">Why Architect This Way? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#why-architect-this-way aria-label=Anchor>#</a></span></h2><p>This architectural approach offers several key benefits:</p><ul><li><strong>Reasoning About Code</strong>: Clear boundaries make it easier to understand what each part of the system does.</li><li><strong>Pure Domain Logic</strong>: By keeping domain logic pure (no side effects, immutable data types), we gain deterministic behavior that&rsquo;s trivial to test in isolation.</li><li><strong>Testability at All Levels</strong>:<ul><li>Domain logic tests become simple input/output verifications</li><li>Application logic can be tested with fakes for external dependencies</li><li>Infrastructure components can be tested independently</li></ul></li><li><strong>Flexibility</strong>: Implementation details can change without affecting the core.</li><li><strong>Maintainability</strong>: Changes tend to be localized to specific layers.</li><li><strong>Explicit Side Effects</strong>: By pushing all side effects to the outer layers, we make them explicit and easier to manage.</li></ul><h2 id=what-are-fake-implementations class="relative group">What Are Fake Implementations? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-are-fake-implementations aria-label=Anchor>#</a></span></h2><p>A &ldquo;Fake&rdquo; in this context is a lightweight, in-memory implementation of an interface used specifically for testing:</p><ul><li>A working implementation that maintains its own state (e.g., data in a map)</li><li>Records operations for verification purposes</li><li>Can be configured to simulate specific scenarios, including errors</li></ul><p>Unlike traditional mocks which focus on interaction verification, fakes allow tests to verify the outcome of operations (state), making them more resilient to refactoring.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Simple example of a fake repository</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>FakeRepository</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>entities</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=nx>Entity</span>
</span></span><span class=line><span class=cl>    <span class=nx>operations</span> <span class=p>[]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>f</span> <span class=o>*</span><span class=nx>FakeRepository</span><span class=p>)</span> <span class=nf>Get</span><span class=p>(</span><span class=nx>id</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=nx>Entity</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>f</span><span class=p>.</span><span class=nx>operations</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nx>operations</span><span class=p>,</span> <span class=s>&#34;Get:&#34;</span><span class=o>+</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>entity</span><span class=p>,</span> <span class=nx>exists</span> <span class=o>:=</span> <span class=nx>f</span><span class=p>.</span><span class=nx>entities</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>exists</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>Entity</span><span class=p>{},</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;not found&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>entity</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>f</span> <span class=o>*</span><span class=nx>FakeRepository</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>entity</span> <span class=nx>Entity</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>f</span><span class=p>.</span><span class=nx>operations</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nx>operations</span><span class=p>,</span> <span class=s>&#34;Save:&#34;</span><span class=o>+</span><span class=nx>entity</span><span class=p>.</span><span class=nx>ID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>f</span><span class=p>.</span><span class=nx>entities</span><span class=p>[</span><span class=nx>entity</span><span class=p>.</span><span class=nx>ID</span><span class=p>]</span> <span class=p>=</span> <span class=nx>entity</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=coming-up-in-part-2 class="relative group">Coming Up in Part 2 <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#coming-up-in-part-2 aria-label=Anchor>#</a></span></h2><p>In the next part of this series, we&rsquo;ll dive into practical implementation details with comprehensive code examples:</p><ul><li>Defining clear interfaces in the application layer</li><li>Creating real and fake implementations</li><li>Testing strategies using fakes</li><li>Practical code examples</li></ul><p>Continue reading
<a href=/posts/architecting-for-testability-in-go/part-2/>Part 2: Implementation Strategy and Code Examples</a></p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Nicholas Hammond</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Thoughts on software engineering, technology, and best practices</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/nichecode target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-1/&amp;text=Architecting%20for%20Testability%20in%20Go%20%28Part%201%29:%20Foundations%20and%20Principles" title="Tweet on Twitter" aria-label="Tweet on Twitter" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-1/&amp;title=Architecting%20for%20Testability%20in%20Go%20%28Part%201%29:%20Foundations%20and%20Principles" title="Share on LinkedIn" aria-label="Share on LinkedIn" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-1/&amp;subject=Architecting%20for%20Testability%20in%20Go%20%28Part%201%29:%20Foundations%20and%20Principles" title="Send via email" aria-label="Send via email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span></span><span><a class="group flex text-right" href=/posts/architecting-for-testability-in-go/part-2/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Architecting for Testability in Go (Part 2): Implementation Strategy and Code Examples</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-04-10 02:00:00 +0000 UTC">10 April 2025</time>
</span></span><span class="ms-2 text-neutral-700 transition-transform group-hover:-translate-x-[-2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&rarr;</span><span class="ltr:hidden rtl:inline">&larr;</span></span></a></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://github.com/nichecode title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">GitHub</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Nicholas Hammond</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://nichecode.github.io/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>