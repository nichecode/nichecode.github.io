<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><title>Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns &#183; Nicholas Hammond</title>
<meta name=title content="Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns &#183; Nicholas Hammond"><script type=text/javascript src=/js/appearance.min.8a082f81b27f3cb2ee528df0b0bdc39787034cf2cc34d4669fbc9977c929023c.js integrity="sha256-iggvgbJ/PLLuUo3wsL3Dl4cDTPLMNNRmn7yZd8kpAjw="></script><link type=text/css rel=stylesheet href=/css/main.bundle.min.8f25b3b1fdd42cfaf2092d7e98b41f6474cfaf471f6aeb265f7ba2579197e54e.css integrity="sha256-jyWzsf3ULPryCS1+mLQfZHTPr0cfausmX3uiV5GX5U4="><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.90a48a144b2de1542549eda42e3a5a686046f98731a313b07209f4432d7f0946.js integrity="sha256-kKSKFEst4VQlSe2kLjpaaGBG+YcxoxOwcgn0Qy1/CUY=" data-copy=Copy data-copied=Copied></script><meta name=description content="
      Real-world applications, metrics, and advanced patterns for testable Go architectures
    "><meta name=robots content="index, follow"><link rel=canonical href=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-3/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://nichecode.github.io/posts/architecting-for-testability-in-go/part-3/"><meta property="og:site_name" content="Nicholas Hammond"><meta property="og:title" content="Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns"><meta property="og:description" content="Real-world applications, metrics, and advanced patterns for testable Go architectures"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-10T03:00:00+00:00"><meta property="article:modified_time" content="2025-04-10T03:00:00+00:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="Testing"><meta property="article:tag" content="Architecture"><meta property="article:tag" content="Clean-Code"><meta name=twitter:card content="summary"><meta name=twitter:title content="Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns"><meta name=twitter:description content="Real-world applications, metrics, and advanced patterns for testable Go architectures"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns","headline":"Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns","description":"Real-world applications, metrics, and advanced patterns for testable Go architectures","abstract":"\u003cdiv class=\u0022flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900\u0022\u003e\n  \u003cspan class=\u0022pe-3 text-primary-400\u0022\u003e\n    \u003cspan class=\u0022icon relative inline-block px-1 align-text-bottom\u0022\u003e\u003csvg xmlns=\u0022http:\/\/www.w3.org\/2000\/svg\u0022 viewBox=\u00220 0 512 512\u0022\u003e\u003cpath fill=\u0022currentColor\u0022 d=\u0022M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z\u0022\/\u003e\u003c\/svg\u003e\n\u003c\/span\u003e\n  \u003c\/span\u003e\n  \u003cspan class=\u0022dark:text-neutral-300\u0022\u003eThis is Part 3 of a 3-part series on architecting Go applications for testability. This final part covers real-world applications, metrics, and advanced patterns.\u003c\/span\u003e\n\u003c\/div\u003e\n\n\u003ch2 id=\u0022the-power-of-pure-domain-logic\u0022 class=\u0022relative group\u0022\u003eThe Power of Pure Domain Logic \u003cspan class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100\u0022\u003e\u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700\u0022 style=\u0022text-decoration-line: none !important;\u0022 href=\u0022#the-power-of-pure-domain-logic\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\u003c\/span\u003e\u003c\/h2\u003e\u003cp\u003eIn \n      \n    \u003ca href=\u0022\/posts\/architecting-for-testability-in-go\/part-1\/\u0022\u003ePart 1\u003c\/a\u003e, we introduced the concept of structuring applications with a pure functional core surrounded by an imperative shell. Let\u0026rsquo;s dig deeper into why this pattern is so powerful for testability:\u003c\/p\u003e","inLanguage":"en","url":"https:\/\/nichecode.github.io\/posts\/architecting-for-testability-in-go\/part-3\/","author":{"@type":"Person","name":"Nicholas Hammond"},"copyrightYear":"2025","dateCreated":"2025-04-10T03:00:00\u002b00:00","datePublished":"2025-04-10T03:00:00\u002b00:00","dateModified":"2025-04-10T03:00:00\u002b00:00","keywords":["go","testing","architecture","clean-code"],"mainEntityOfPage":"true","wordCount":"1997"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://nichecode.github.io/","name":"Nicholas Hammond","position":1},{"@type":"ListItem","item":"https://nichecode.github.io/posts/","name":"Posts","position":2},{"@type":"ListItem","item":"https://nichecode.github.io/posts/architecting-for-testability-in-go/","name":"Architecting for Testability in Go Using Fakes, Not Mocks","position":3},{"@type":"ListItem","item":"https://nichecode.github.io/categories/software-development/","name":"Software Development","position":4},{"@type":"ListItem","name":"Architecting for Testability in Go ( Part 3) Real World Applications and Advanced Patterns","position":5}]}</script><meta name=author content="Nicholas Hammond"><link href=https://github.com/nichecode rel=me><script defer type=text/javascript src=/js/mermaid.bundle.832624a553672a6ccda17159509c1ec6d0d691d57d975bab3ea0c67d4b5f45e838af68b83e8b06f78aa79c286b60388f54be6e274806fdbdc642a0019161d9e2.js integrity="sha512-gyYkpVNnKmzNoXFZUJwextDWkdV9l1urPqDGfUtfReg4r2i4PosG94qnnChrYDiPVL5uJ0gG/b3GQqABkWHZ4g=="></script></head><body class="m-auto flex h-screen max-w-7xl flex-col bg-neutral px-6 text-lg leading-7 text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="-translate-y-8 rounded-b-lg bg-primary-200 px-3 py-1 text-sm focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="pe-2 font-bold text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral sm:py-10 print:hidden"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Nicholas Hammond</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="invisible fixed inset-0 z-30 m-auto h-full w-full cursor-default overflow-auto bg-neutral-100/50 opacity-0 backdrop-blur-sm transition-opacity dark:bg-neutral-900/50"><ul class="mx-auto flex w-full max-w-7xl list-none flex-col overflow-visible px-6 py-6 text-end sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="group mb-1"><a href=/posts/ title=Posts onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="group mb-1"><a href=/tags/ title=Tags onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1"><a href=/categories/ title=Categories onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="group mb-1"><a href=/about/ title=About onclick=close_menu()><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1"><button id=search-button-1 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></div></label><ul class="hidden list-none flex-row text-end sm:flex"><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/tags/ title=Tags><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Tags</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/categories/ title=Categories><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Categories</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><a href=/about/ title=About><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">About</span></a></li><li class="group mb-1 sm:mb-0 sm:me-7 sm:last:me-0"><button id=search-button-2 title="Search (/)">
<span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2"></span></button></li></ul></nav></header><div class="relative flex grow flex-col"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/>Nicholas Hammond</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/architecting-for-testability-in-go/>Architecting for Testability in Go: Using Fakes, Not Mocks</a><span class="px-1 text-primary-500">/</span></li><li class="hidden inline"><a class="dark:underline-neutral-600 decoration-neutral-300 hover:underline" href=/posts/architecting-for-testability-in-go/part-3/>Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mb-8 mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Architecting for Testability in Go (Part 3): Real-World Applications and Advanced Patterns</h1><div class="mb-10 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2025-04-10 03:00:00 +0000 UTC">10 April 2025</time><span class="px-2 text-primary-500">&#183;</span><span>1997 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">10 mins</span></div><div class="my-1 flex flex-wrap text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/categories/software-development/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Software Development</a>
<a href=/tags/go/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Go</a>
<a href=/tags/testing/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Testing</a>
<a href=/tags/architecture/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Architecture</a>
<a href=/tags/clean-code/ class="mx-1 my-1 rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">Clean-Code</a></div></div></header><section class="prose mt-0 flex max-w-full flex-col dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs lg:ps-8"><div class="toc pe-5 lg:sticky lg:top-10 print:hidden"><details open class="-ms-5 mt-0 overflow-hidden rounded-lg ps-5"><summary class="block cursor-pointer bg-neutral-100 py-1 ps-5 text-lg font-semibold text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="border-s border-dotted border-neutral-300 py-2 ps-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#the-power-of-pure-domain-logic>The Power of Pure Domain Logic</a><ul><li><a href=#our-hybrid-approach-a-testable-imperative-shell>Our Hybrid Approach: A Testable Imperative Shell</a></li><li><a href=#pure-functions-the-testing-superpower>Pure Functions: The Testing Superpower</a></li></ul></li><li><a href=#the-investment-argument-is-this-worth-it>The Investment Argument: Is This Worth It?</a><ul><li><a href=#simplicity-vs-architecture>Simplicity vs. Architecture</a></li><li><a href=#the-value-proposition>The Value Proposition</a></li></ul></li><li><a href=#comparison-with-other-testing-approaches>Comparison with Other Testing Approaches</a><ul><li><a href=#when-not-to-use-this-approach>When NOT to Use This Approach</a></li></ul></li><li><a href=#advanced-pattern-supporting-dry-run-mode>Advanced Pattern: Supporting Dry-Run Mode</a></li><li><a href=#migrating-existing-codebases>Migrating Existing Codebases</a></li><li><a href=#testing-logging-with-structured-analysis>Testing Logging with Structured Analysis</a></li><li><a href=#conclusion-the-path-to-maintainable-go>Conclusion: The Path to Maintainable Go</a></li><li><a href=#whats-next>What&rsquo;s Next?</a></li></ul></nav></div></details></div></div><div class="min-h-0 min-w-0 max-w-prose grow"><div class="flex rounded-md bg-primary-100 px-4 py-3 dark:bg-primary-900"><span class="pe-3 text-primary-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg>
</span></span><span class=dark:text-neutral-300>This is Part 3 of a 3-part series on architecting Go applications for testability. This final part covers real-world applications, metrics, and advanced patterns.</span></div><h2 id=the-power-of-pure-domain-logic class="relative group">The Power of Pure Domain Logic <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-power-of-pure-domain-logic aria-label=Anchor>#</a></span></h2><p>In
<a href=/posts/architecting-for-testability-in-go/part-1/>Part 1</a>, we introduced the concept of structuring applications with a pure functional core surrounded by an imperative shell. Let&rsquo;s dig deeper into why this pattern is so powerful for testability:</p><h3 id=our-hybrid-approach-a-testable-imperative-shell class="relative group">Our Hybrid Approach: A Testable Imperative Shell <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#our-hybrid-approach-a-testable-imperative-shell aria-label=Anchor>#</a></span></h3><p>A key innovation in our approach is how we handle the &ldquo;imperative shell&rdquo; portion of the Functional Core, Imperative Shell pattern. In the classic FCIS pattern, the shell contains all side effects and is typically tested primarily through integration tests.</p><p>What makes our approach different is that we&rsquo;ve made the imperative shell itself highly testable by:</p><ol><li><p>Splitting it into two parts:</p><ul><li><strong>Application Layer</strong>: Handles orchestration but uses interfaces to abstract external dependencies</li><li><strong>Infrastructure Layer</strong>: Implements those interfaces and manages actual I/O</li></ul></li><li><p>Using dependency inversion to allow fake implementations to be injected for testing</p></li></ol><div class=mermaid align=center>flowchart TD
%% Traditional FCIS Pattern
subgraph subGraph0["Traditional FCIS"]
subgraph Shell["Imperative Shell"]
IS["Orchestration Logic"]
end
subgraph Core["Functional Core"]
FC["Domain Logic"]
end
subgraph External1["External Dependencies"]
DB1[("Database")]
API1{{"API"}}
FS1["File System"]
end
IS --> FC
IS --> DB1
IS --> API1
IS --> FS1
IT["Integration Tests"] -.-> Shell
UT1["Unit Tests"] -.-> Core
end
%% Our Testable Approach
subgraph subGraph1["Our Testable Imperative Shell"]
%% Domain Package (independent, core logic)
subgraph DomainPkg["domain/"]
subgraph Dom["Domain Layer"]
DL["Pure Domain Logic"]
DM["Domain Models"]
end
end
%% Application Package (defines interfaces, orchestrates)
subgraph AppPkg["application/"]
subgraph App["Application Layer"]
AL["Application Services"]
subgraph Interfaces["Interfaces"]
RI["Repository Interface"]
LI["Logger Interface"]
end
subgraph Contracts["API Contracts"]
AC["Request/Response Models"]
end
end
end
%% Infrastructure Package (implementations)
subgraph InfraPkg["infrastructure/"]
subgraph Infra["Infrastructure Layer"]
subgraph RealImpl["Real Implementations"]
CR["Concrete Repository"]
CL["Concrete Logger"]
end
subgraph FakeImpl["Fake Implementations"]
FR["Fake Repository"]
FL["Fake Logger"]
end
subgraph Handlers["Entry Points"]
HT["HTTP Handlers"]
MC["Message Consumers"]
end
end
subgraph External2["External Dependencies"]
DB2[("Database")]
API2{{"API"}}
FS2["File System"]
end
end
%% Relationships between layers
AL --> RI
AL --> LI
AL --> DL
AL --> DM
%% Infrastructure implements interfaces
CR --> RI
CL --> LI
FR --> RI
FL --> LI
%% Infrastructure connects to external
CR --> DB2
CR --> API2
CL --> FS2
%% Handlers use application services
HT --> AL
MC --> AL
%% Testing arrows
UT2["Unit Tests with Fakes"] -.-> App
UT3["Unit Tests"] -.-> Dom
IT2["Integration Tests"] -.-> RealImpl
end
%% Styling
classDef shellClass fill:#e0e0e0,stroke:#333,stroke-dasharray:5 5,color:black
classDef coreClass fill:#b8f2d7,stroke:#333,stroke-width:2px,color:black
classDef extClass fill:#fff,stroke:#333,color:black
classDef testClass fill:#f8f8f8,stroke:#333,color:black,stroke-dasharray:3 3
classDef infraClass fill:#e0e0e0,stroke:#333,color:black
classDef appClass fill:#a1c6ff,stroke:#333,color:black
classDef domainClass fill:#b8f2d7,stroke:#333,stroke-width:2px,color:black
classDef interfaceClass fill:#fff0a0,stroke:#333,color:black
classDef fakeClass fill:#ffccd5,stroke:#333,color:black,stroke-dasharray:5 5
classDef noteClass fill:#f8f8f8,stroke:#333,color:black
classDef mainGraphClass fill:#2d333b,stroke:#d4d4d4,stroke-width:2px,color:white
classDef packageClass fill:#3f464e,stroke:#ffffff54,stroke-width:1px,color:white
%% Apply styles
class IS shellClass
class FC coreClass
class DB1,API1,FS1,DB2,API2,FS2 extClass
class IT,UT1,UT2,UT3,IT2 testClass
class CR,CL,HT,MC infraClass
class AL,AC appClass
class DL,DM domainClass
class RI,LI interfaceClass
class FR,FL fakeClass
class subGraph0,subGraph1 mainGraphClass
class DomainPkg,AppPkg,InfraPkg packageClass
%% Make inner containers styled
style Shell fill:#e0e0e054,stroke:#d4d4d4,stroke-dasharray:5 5
style Core fill:#b8f2d754,stroke:#d4d4d4,stroke-width:2px
style Dom fill:#b8f2d754,stroke:#d4d4d4,stroke-width:2px
style App fill:#a1c6ff54,stroke:#d4d4d4
style Infra fill:#e0e0e054,stroke:#d4d4d4
style RealImpl fill:#e0e0e054,stroke:#d4d4d4
style FakeImpl fill:#ffccd554,stroke:#d4d4d4,stroke-dasharray:5 5
style Handlers fill:#e0e0e054,stroke:#d4d4d4
style External1 fill:#ffffff54,stroke:#d4d4d4
style External2 fill:#ffffff54,stroke:#d4d4d4
style Interfaces fill:#fff0a054,stroke:#d4d4d4
style Contracts fill:#a1c6ff54,stroke:#d4d4d4</div><p>This approach gives us the best of both worlds: pure domain logic that&rsquo;s trivially testable without mocks, and orchestration logic that can be tested without real external dependencies. This is a significant advantage over the pure FCIS pattern, while maintaining a simpler structure than traditional Hexagonal or Onion architectures.</p><h3 id=pure-functions-the-testing-superpower class="relative group">Pure Functions: The Testing Superpower <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pure-functions-the-testing-superpower aria-label=Anchor>#</a></span></h3><p>Domain logic implemented as pure functions with immutable data types offers extraordinary testing benefits:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Example of pure domain logic - easy to test!</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>domain</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Value object with immutability</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ID</span>       <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>     <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Email</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>IsActive</span> <span class=kt>bool</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Pure function - no side effects, just input → output</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>CanUserAccess</span><span class=p>(</span><span class=nx>user</span> <span class=nx>User</span><span class=p>,</span> <span class=nx>resourceType</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>resourceID</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>user</span><span class=p>.</span><span class=nx>IsActive</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Check specific access rules...</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>checkAccessRules</span><span class=p>(</span><span class=nx>user</span><span class=p>,</span> <span class=nx>resourceType</span><span class=p>,</span> <span class=nx>resourceID</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Testing is trivial:</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestCanUserAccess</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>inactiveUser</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span> <span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;Test&#34;</span><span class=p>,</span> <span class=nx>IsActive</span><span class=p>:</span> <span class=kc>false</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>assert</span><span class=p>.</span><span class=nf>False</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nf>CanUserAccess</span><span class=p>(</span><span class=nx>inactiveUser</span><span class=p>,</span> <span class=s>&#34;document&#34;</span><span class=p>,</span> <span class=s>&#34;123&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>activeUser</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>ID</span><span class=p>:</span> <span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;Test&#34;</span><span class=p>,</span> <span class=nx>IsActive</span><span class=p>:</span> <span class=kc>true</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// More assertions...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The key characteristics that make pure domain logic easy to test:</p><ol><li><strong>Deterministic behavior</strong>: Same inputs always yield same outputs</li><li><strong>No hidden inputs</strong>: All inputs are explicit parameters</li><li><strong>No side effects</strong>: No external state modification</li><li><strong>No dependencies</strong>: No mocking/stubbing required</li><li><strong>Immutability</strong>: No defensive copying needed in tests</li></ol><p>By keeping complex business rules in the domain, we minimize the imperative code in the application layer, whose primary job becomes orchestration rather than logic.</p><h2 id=the-investment-argument-is-this-worth-it class="relative group">The Investment Argument: Is This Worth It? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-investment-argument-is-this-worth-it aria-label=Anchor>#</a></span></h2><p>A common concern about the architectural approach outlined in our series is the upfront investment required. Let&rsquo;s address this with concrete evidence and reasoning.</p><h3 id=simplicity-vs-architecture class="relative group">Simplicity vs. Architecture <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#simplicity-vs-architecture aria-label=Anchor>#</a></span></h3><p>Before diving into metrics, let&rsquo;s address a common criticism: &ldquo;Isn&rsquo;t this just adding unnecessary complexity?&rdquo;</p><p>Many developers, particularly those coming from enterprise .NET backgrounds, have been burned by over-architected solutions that promised maintainability but delivered complexity. They&rsquo;ve seen codebases where:</p><ul><li>Simple feature additions required touching a dozen files across multiple projects</li><li>Dependency injection configurations grew to hundreds of lines</li><li>Repositories ballooned to hundreds of methods</li><li>Tests became brittle verification of implementation details rather than behavior</li></ul><p>The approach presented here deliberately aims for a &ldquo;just enough&rdquo; architecture that:</p><ol><li><strong>Minimizes boilerplate</strong>: No complex frameworks or excessive abstractions required</li><li><strong>Follows Go idioms</strong>: Leverages interfaces and composition naturally</li><li><strong>Creates natural boundaries</strong>: The structure feels logical, not forced</li><li><strong>Pays for itself quickly</strong>: Initial investment in structure is rapidly offset by reduced testing and maintenance costs</li></ol><p>Unlike some over-engineered implementations of hexagonal architecture or clean architecture, this approach focuses on pragmatic benefits rather than architectural purity. The number of layers and interfaces is kept to the practical minimum needed to achieve clear separation of concerns.</p><h3 id=the-value-proposition class="relative group">The Value Proposition <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-value-proposition aria-label=Anchor>#</a></span></h3><p>When considering whether this architectural approach is worth the investment, consider these potential benefits:</p><ol><li><p><strong>Localized Changes</strong>: With clear boundaries between layers, changes tend to be contained within specific components, potentially making refactoring less risky.</p></li><li><p><strong>Testing Focus</strong>: The approach enables focused testing strategies for each layer - pure function testing for domain logic and fake-based testing for application logic.</p></li><li><p><strong>Code Organization</strong>: The structure provides a consistent place for different types of code, which may help in understanding where new code should be placed.</p></li><li><p><strong>Separation of Concerns</strong>: By isolating domain logic from external dependencies, this approach can make it easier to reason about the business rules independently.</p></li><li><p><strong>Team Collaboration</strong>: Clear boundaries can provide natural lines of responsibility for different team members or sub-teams.</p></li></ol><p>It&rsquo;s important to evaluate whether these potential benefits apply to your specific context and team. The approach may not be appropriate for every project, particularly smaller utilities or applications with minimal business logic complexity.</p><h2 id=comparison-with-other-testing-approaches class="relative group">Comparison with Other Testing Approaches <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#comparison-with-other-testing-approaches aria-label=Anchor>#</a></span></h2><p>Let&rsquo;s compare our fake-based approach with alternatives:</p><figure><img src=images/testing-approaches-comparison.svg alt="Comparison of different testing approaches" loading=lazy><figcaption>Comparison of testing approaches: Mocks vs. Stubs vs. Fakes vs. Integration Tests</figcaption></figure><table><thead><tr><th>Approach</th><th>Pros</th><th>Cons</th><th>Best For</th></tr></thead><tbody><tr><td>Mocks/Spies</td><td>Quick for simple cases; Fine-grained verification; Mature tooling</td><td>Brittle (implementation-focused); Hard to maintain; Test-code coupling</td><td>Verifying specific interactions when they&rsquo;re part of the contract</td></tr><tr><td>Stubs</td><td>Very simple; Fast; Low maintenance</td><td>Limited to canned responses; No state tracking; Limited verification</td><td>Simple scenarios with fixed responses</td></tr><tr><td>Heavy Integration</td><td>High confidence in real behavior; Tests actual integrations</td><td>Slow; Resource-intensive; Flaky; Complex setup</td><td>Critical paths; Confirming system wiring</td></tr><tr><td>Fakes + Functional Core</td><td>State/behavior focused; Refactor-friendly; Fast; Simplifies most domain testing</td><td>Initial implementation effort; Requires architectural discipline</td><td>Most business applications; Systems needing maintainability</td></tr></tbody></table><h3 id=when-not-to-use-this-approach class="relative group">When NOT to Use This Approach <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#when-not-to-use-this-approach aria-label=Anchor>#</a></span></h3><p>This architecture may not be the optimal choice for all situations:</p><ol><li><p><strong>Very Small Projects</strong>: For simple CLIs or utilities with minimal business logic, the architectural overhead may not provide sufficient benefits.</p></li><li><p><strong>Short-lived Projects</strong>: If the code will have a limited lifespan and maintenance isn&rsquo;t a primary concern.</p></li><li><p><strong>Infrastructure-focused Code</strong>: Some types of infrastructure-heavy code (like proxies or simple data transformations) might not benefit as much from this separation.</p></li></ol><p>In these cases, a simpler approach might be more appropriate, though aspects of the pattern (like clear interfaces) could still be valuable.</p><h2 id=advanced-pattern-supporting-dry-run-mode class="relative group">Advanced Pattern: Supporting Dry-Run Mode <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#advanced-pattern-supporting-dry-run-mode aria-label=Anchor>#</a></span></h2><p>One powerful benefit of having well-designed fakes is the ability to use them for features like dry-run mode. This provides additional ROI on the testing investment.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Example main.go with dry-run support</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;flag&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...other imports</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>isDryRun</span> <span class=o>:=</span> <span class=nx>flag</span><span class=p>.</span><span class=nf>Bool</span><span class=p>(</span><span class=s>&#34;dry-run&#34;</span><span class=p>,</span> <span class=kc>false</span><span class=p>,</span> <span class=s>&#34;Execute in dry-run mode (no side effects)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>flag</span><span class=p>.</span><span class=nf>Parse</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Configure dependencies based on mode</span>
</span></span><span class=line><span class=cl>    <span class=nx>cfg</span> <span class=o>:=</span> <span class=nx>bootstrap</span><span class=p>.</span><span class=nx>Config</span><span class=p>{</span><span class=nx>IsDryRun</span><span class=p>:</span> <span class=o>*</span><span class=nx>isDryRun</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Only connect to real DB if not in dry-run</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>db</span> <span class=o>*</span><span class=nx>sql</span><span class=p>.</span><span class=nx>DB</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=o>*</span><span class=nx>isDryRun</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>db</span> <span class=p>=</span> <span class=nf>setupRealDatabase</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Use factories to select appropriate implementations</span>
</span></span><span class=line><span class=cl>    <span class=nx>repo</span> <span class=o>:=</span> <span class=nx>bootstrap</span><span class=p>.</span><span class=nf>NewRepository</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>,</span> <span class=nx>db</span><span class=p>)</span> <span class=c1>// Returns fake if dry-run</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>bootstrap</span><span class=p>.</span><span class=nf>NewLogger</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>)</span> <span class=c1>// Could use real logger even in dry-run</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>service</span> <span class=o>:=</span> <span class=nx>application</span><span class=p>.</span><span class=nf>NewUserService</span><span class=p>(</span><span class=nx>repo</span><span class=p>,</span> <span class=nx>logger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Run the application...</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>*</span><span class=nx>isDryRun</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;--- DRY RUN MODE ENABLED ---&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// After operations, can inspect fake state if desired</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>*</span><span class=nx>isDryRun</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>fakeRepo</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>repo</span><span class=p>.(</span><span class=o>*</span><span class=nx>storage</span><span class=p>.</span><span class=nx>FakeRepository</span><span class=p>);</span> <span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>op</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>fakeRepo</span><span class=p>.</span><span class=nf>GetOperations</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// Log details about what would have happened</span>
</span></span><span class=line><span class=cl>                <span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=s>&#34;Would have performed operation&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                    <span class=s>&#34;type&#34;</span><span class=p>,</span> <span class=nx>op</span><span class=p>.</span><span class=nx>OperationType</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s>&#34;timestamp&#34;</span><span class=p>,</span> <span class=nx>op</span><span class=p>.</span><span class=nx>Timestamp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This feature allows users to:</p><ul><li>Preview the effects of commands without making actual changes</li><li>Debug complicated workflows safely</li><li>Validate input data before committing changes</li></ul><p>It&rsquo;s essentially a free bonus from the testing investment.</p><h2 id=migrating-existing-codebases class="relative group">Migrating Existing Codebases <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#migrating-existing-codebases aria-label=Anchor>#</a></span></h2><p>Moving an existing codebase to this architecture doesn&rsquo;t require a complete rewrite. Here&rsquo;s a pragmatic migration approach:</p><ol><li><p><strong>Start with Interfaces</strong>: Begin by defining interfaces for your repositories and other infrastructure dependencies.</p></li><li><p><strong>Extract Pure Logic</strong>: Identify business rules that can be moved to pure functions in a domain package.</p></li><li><p><strong>Implement Fakes</strong>: Create fake implementations alongside your real ones for testing.</p></li><li><p><strong>Incremental Refactoring</strong>: Apply this pattern to new features first, then gradually refactor existing code.</p></li><li><p><strong>Boundary Definition</strong>: Establish clear boundaries between layers, possibly using separate packages.</p></li></ol><p>Remember that imperfect progress is better than no progress. Even partial adoption of these principles can yield benefits.</p><h2 id=testing-logging-with-structured-analysis class="relative group">Testing Logging with Structured Analysis <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#testing-logging-with-structured-analysis aria-label=Anchor>#</a></span></h2><p>Let&rsquo;s look at a more sophisticated approach for structured logging verification:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestServiceLogsCorrectStructuredData</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Arrange</span>
</span></span><span class=line><span class=cl>    <span class=nx>fakeLogger</span> <span class=o>:=</span> <span class=nx>logging_test</span><span class=p>.</span><span class=nf>NewFakeLogger</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>service</span> <span class=o>:=</span> <span class=nf>NewReportingService</span><span class=p>(</span><span class=nx>fakeLogger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Act</span>
</span></span><span class=line><span class=cl>    <span class=nx>service</span><span class=p>.</span><span class=nf>GenerateReport</span><span class=p>(</span><span class=s>&#34;monthly&#34;</span><span class=p>,</span> <span class=s>&#34;2023-04&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Assert with structured analysis</span>
</span></span><span class=line><span class=cl>    <span class=nx>entries</span> <span class=o>:=</span> <span class=nx>fakeLogger</span><span class=p>.</span><span class=nf>GetEntries</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Find specific structured log</span>
</span></span><span class=line><span class=cl>    <span class=nx>reportStartEntry</span> <span class=o>:=</span> <span class=nf>findLogEntry</span><span class=p>(</span><span class=nx>entries</span><span class=p>,</span> <span class=s>&#34;info&#34;</span><span class=p>,</span> <span class=s>&#34;Report generation started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>require</span><span class=p>.</span><span class=nf>NotNil</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>reportStartEntry</span><span class=p>,</span> <span class=s>&#34;Missing expected log entry&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Analyze structured fields</span>
</span></span><span class=line><span class=cl>    <span class=nx>fields</span> <span class=o>:=</span> <span class=nf>extractKeyValuePairs</span><span class=p>(</span><span class=nx>reportStartEntry</span><span class=p>.</span><span class=nx>Args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>assert</span><span class=p>.</span><span class=nf>Equal</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=s>&#34;monthly&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=p>[</span><span class=s>&#34;report_type&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>assert</span><span class=p>.</span><span class=nf>Equal</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=s>&#34;2023-04&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=p>[</span><span class=s>&#34;period&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Verify sequence</span>
</span></span><span class=line><span class=cl>    <span class=nx>completionEntry</span> <span class=o>:=</span> <span class=nf>findLogEntry</span><span class=p>(</span><span class=nx>entries</span><span class=p>,</span> <span class=s>&#34;info&#34;</span><span class=p>,</span> <span class=s>&#34;Report generation completed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>require</span><span class=p>.</span><span class=nf>NotNil</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> <span class=nx>completionEntry</span><span class=p>,</span> <span class=s>&#34;Missing completion log&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// Verify completion entry was logged after start entry</span>
</span></span><span class=line><span class=cl>    <span class=nx>assert</span><span class=p>.</span><span class=nf>Greater</span><span class=p>(</span><span class=nx>t</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=nf>indexOfEntry</span><span class=p>(</span><span class=nx>entries</span><span class=p>,</span> <span class=nx>completionEntry</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=nf>indexOfEntry</span><span class=p>(</span><span class=nx>entries</span><span class=p>,</span> <span class=nx>reportStartEntry</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;Completion log should come after start log&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Helper functions...</span>
</span></span></code></pre></div><p>This verifies both that logging occurred and that the specific contextual data was included.</p><h2 id=conclusion-the-path-to-maintainable-go class="relative group">Conclusion: The Path to Maintainable Go <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#conclusion-the-path-to-maintainable-go aria-label=Anchor>#</a></span></h2><p>Throughout this series, we&rsquo;ve explored an architectural approach that combines:</p><ol><li><strong>Pure Functional Core</strong>: Business logic as pure functions with immutable data</li><li><strong>Clean Layered Architecture</strong>: Clear separation of concerns with dependency inversion</li><li><strong>Fake-Based Testing</strong>: State-focused testing that enables refactoring</li></ol><p>This approach isn&rsquo;t about architectural purity—it&rsquo;s about practical benefits:</p><ul><li><strong>Isolated domain logic</strong> that&rsquo;s trivial to test</li><li><strong>Testable application layer</strong> with clear interfaces</li><li><strong>Protection from external contracts</strong> and infrastructure concerns</li><li><strong>Resilience to refactoring</strong> through state-based testing</li><li><strong>Simplified structure</strong> that avoids overengineering</li></ul><figure><img src=images/golang-impact.svg alt="The impact of Go's key features: Simplicity, Efficiency, Concurrency, Ease of Use, and Robust Library converging to enable High-Performance Applications" loading=lazy><figcaption>Go's design principles make it ideal for implementing this architectural approach</figcaption></figure><p>Go&rsquo;s emphasis on simplicity and readability makes it the perfect language for this approach. By providing just enough structure to support testability without adding unnecessary complexity, we create a balance between development speed, maintainability, and reliability.</p><p>Remember: <strong>Testing problems are usually structural problems in disguise</strong>. By addressing architecture first, testing becomes a natural extension of good design rather than a burden.</p><p>Whether you&rsquo;re building a new service or refactoring an existing one, these patterns provide a path to more maintainable, testable, and ultimately successful Go applications.</p><h2 id=whats-next class="relative group">What&rsquo;s Next? <span class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#whats-next aria-label=Anchor>#</a></span></h2><p>Consider these resources to further your understanding:</p><ul><li><a href=https://golang.org/pkg/testing/ target=_blank rel=noreferrer>Go&rsquo;s Testing Package Documentation</a></li><li><a href=https://pace.dev/blog/2018/05/09/how-I-write-http-services-after-eight-years.html target=_blank rel=noreferrer>Mat Ryer&rsquo;s &ldquo;How I Write HTTP Services after Eight Years&rdquo;</a></li><li><a href=https://dave.cheney.net/practical-go/presentations/qcon-china.html target=_blank rel=noreferrer>Dave Cheney&rsquo;s &ldquo;Practical Go: Real World Advice for Writing Maintainable Go Programs&rdquo;</a></li></ul><p>Share your experiences with this architectural approach—I&rsquo;d love to hear how it works for your team!</p></div></section><footer class="max-w-prose pt-8 print:hidden"><div class=flex><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Nicholas Hammond</div><div class="text-sm text-neutral-700 dark:text-neutral-400">Thoughts on software engineering, technology, and best practices</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/nichecode target=_blank aria-label=Github rel="me noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-3/&amp;text=Architecting%20for%20Testability%20in%20Go%20%28Part%203%29:%20Real-World%20Applications%20and%20Advanced%20Patterns" title="Tweet on Twitter" aria-label="Tweet on Twitter" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-3/&amp;title=Architecting%20for%20Testability%20in%20Go%20%28Part%203%29:%20Real-World%20Applications%20and%20Advanced%20Patterns" title="Share on LinkedIn" aria-label="Share on LinkedIn" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nichecode.github.io/posts/architecting-for-testability-in-go/part-3/&amp;subject=Architecting%20for%20Testability%20in%20Go%20%28Part%203%29:%20Real-World%20Applications%20and%20Advanced%20Patterns" title="Send via email" aria-label="Send via email" target=_blank rel="noopener noreferrer"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/posts/architecting-for-testability-in-go/part-2/><span class="me-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 dark:text-neutral dark:group-hover:text-primary-400"><span class="ltr:inline rtl:hidden">&larr;</span><span class="ltr:hidden rtl:inline">&rarr;</span></span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Architecting for Testability in Go (Part 2): Implementation Strategy and Code Examples</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2025-04-10 02:00:00 +0000 UTC">10 April 2025</time>
</span></span></a></span><span></span></div></div></footer></article></main><div class="pointer-events-none absolute bottom-0 end-0 top-[100vh] w-12" id=to-top hidden=true><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div><footer class="py-10 print:hidden"><nav class="pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex list-none flex-col sm:flex-row"><li class="group mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0"><a href=https://github.com/nichecode title target=_blank><span class="group-dark:hover:text-primary-400 transition-colors group-hover:text-primary-600"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">GitHub</span></a></li></ul></nav><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2025
Nicholas Hammond</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://github.com/jpanther/congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="flex flex-row items-center"><div class="me-14 cursor-pointer text-sm text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"><button id=appearance-switcher-0 type=button aria-label="appearance switcher"><div class="flex h-12 w-12 items-center justify-center dark:hidden" title="Switch to dark appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></div><div class="hidden h-12 w-12 items-center justify-center dark:flex" title="Switch to light appearance"><span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></div></button></div></div></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://nichecode.github.io/><div id=search-modal class="top-20 mx-auto flex min-h-0 w-full max-w-3xl flex-col rounded-md border border-neutral-200 bg-neutral shadow-lg dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex flex-none items-center justify-between px-2"><form class="flex min-w-0 flex-auto items-center"><div class="flex h-8 w-8 items-center justify-center text-neutral-400"><span class="icon relative inline-block px-1 align-text-bottom"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="mx-1 flex h-12 flex-auto appearance-none bg-transparent focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex h-8 w-8 items-center justify-center text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="icon relative inline-block px-1 align-text-bottom"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto overflow-auto px-2"><ul id=search-results></ul></section></div></div></div></body></html>